(self["webpackChunkpython_qrcode_web"]=self["webpackChunkpython_qrcode_web"]||[]).push([[512],{91191:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return R}});r(96651);var n=r(29245),t=(r(1798),r(40024)),s=(r(63639),r(51620)),c=(r(79845),r(11983)),i=(r(14730),r(69672)),u=(r(91204),r(76997)),d=r(57113),l=(r(49404),r(52306)),o=r(82005),p=r(71188),h=r(50959),m=r(11527),x=()=>(0,m.jsx)("div",{className:"navbar",children:(0,m.jsx)("div",{className:"navbar-box",children:(0,m.jsx)("span",{className:"navbar-title",children:"Python_QRCode WebUI"})})}),v=x,b=r(46090),f=r.n(b),j=[200],Z={timeout:1e5,headers:{"Content-type":"application/json"},baseURL:"http://127.0.0.1:5000"},g=e=>{var a=e.status,r=e.data;if(!j.includes(a)||0!==r.code)throw r.message;return r},w=e=>{var a,r=e.response;throw null!==r&&void 0!==r&&null!==(a=r.data)&&void 0!==a&&a.message?r.data.message:e},N=f().create(Z);N.interceptors.response.use(g,w);var y=N;function k(e){return C.apply(this,arguments)}function C(){return C=(0,o.Z)((0,d.Z)().mark((function e(a){var r,n,t;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/api/encode",e.next=3,y.post(r,a);case 3:return n=e.sent,t=n.data,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function S(e){return q.apply(this,arguments)}function q(){return q=(0,o.Z)((0,d.Z)().mark((function e(a){var r,n,t;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="/api/decode",e.next=3,y.post(r,a);case 3:return n=e.sent,t=n.data,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}var U=(e,a)=>{var r=document.createElement("a");r.href=e,r.download=a,r.click()},_=()=>{var e=(0,h.useState)(""),a=(0,p.Z)(e,2),r=a[0],x=a[1],b=(0,h.useState)(""),f=(0,p.Z)(b,2),j=f[0],Z=f[1],g=(0,h.useState)(!1),w=(0,p.Z)(g,2),N=w[0],y=w[1],C=(0,h.useState)(""),q=(0,p.Z)(C,2),_=q[0],R=q[1],D=(0,h.useState)(""),L=(0,p.Z)(D,2),P=L[0],A=L[1],G=(0,h.useState)(!1),I=(0,p.Z)(G,2),T=I[0],z=I[1],B=function(){var e=(0,o.Z)((0,d.Z)().mark((function e(a){var r,n,t,s,c;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="image/jpeg"===a.type,n="image/png"===a.type,r||n){e.next=5;break}return l.default.error("You can only upload JPG/PNG file!"),e.abrupt("return",!1);case 5:if(t=a.size/1024/1024<5,t){e.next=9;break}return l.default.error("Image must smaller than 2MB!"),e.abrupt("return",!1);case 9:s="",c=new FileReader,c.readAsDataURL(a),c.onload=(0,o.Z)((0,d.Z)().mark((function e(){var a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=c.result,s=a.replace("data:image/png;base64,",""),R(s),e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})));case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),E=function(){var e=(0,o.Z)((0,d.Z)().mark((function e(){var a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,k({data:r});case 4:a=e.sent,Z("data:image/png;base64,".concat(a)),l.default.success("\u751f\u6210\u6210\u529f"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.error(e.t0);case 12:y(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,o.Z)((0,d.Z)().mark((function e(){var a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return");case 2:return z(!0),e.prev=3,e.next=6,S({data:_});case 6:a=e.sent,A(null===a||void 0===a?void 0:a[0]),l.default.success("\u89e3\u7801\u6210\u529f"),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),console.error(e.t0);case 14:z(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),J=()=>{var e="output-".concat((new Date).getTime(),".png");U(j,e)};return(0,m.jsxs)("div",{className:"container",children:[(0,m.jsx)(v,{}),(0,m.jsxs)(n.Z,{className:"qr",children:[(0,m.jsx)(s.Z,{className:"qr-card",span:8,children:(0,m.jsxs)("div",{className:"encode",children:[(0,m.jsx)(u.Z.TextArea,{rows:4,className:"encode-input",placeholder:"\u8bf7\u8f93\u5165\u8981\u7f16\u7801\u7684\u5185\u5bb9",onChange:e=>x(e.target.value)}),(0,m.jsx)("div",{className:"encode-img",children:""===j?(0,m.jsx)("div",{className:"empty-img-box",children:N&&(0,m.jsx)(i.Z,{})}):(0,m.jsx)("div",{className:"img-box",children:N?(0,m.jsx)(i.Z,{}):(0,m.jsx)("img",{src:j})})}),(0,m.jsxs)("div",{children:[(0,m.jsx)(c.Z,{className:"encode-btn",onClick:()=>E(),disabled:""===r||N,children:(0,m.jsx)("span",{className:"encode-btn-text",children:"\u751f\u6210"})}),(0,m.jsx)(c.Z,{type:"primary",className:"encode-btn",onClick:()=>J(),disabled:""===r||N,children:(0,m.jsx)("span",{className:"encode-btn-text",children:"\u4fdd\u5b58"})})]})]})}),(0,m.jsx)(s.Z,{className:"qr-card",span:8,children:(0,m.jsxs)("div",{className:"decode",children:[(0,m.jsx)("div",{className:"decode-img",children:(0,m.jsx)(t.Z.Dragger,{showUploadList:!1,beforeUpload:B,children:(0,m.jsx)("div",{className:"img-box",children:""===_?(0,m.jsx)("div",{className:"empty-img-box"}):(0,m.jsx)("img",{src:"data:image/png;base64,".concat(_)})})})}),(0,m.jsx)("div",{className:"decode-output",children:T?(0,m.jsx)(i.Z,{}):(0,m.jsx)("span",{children:P})}),(0,m.jsx)(c.Z,{type:"primary",className:"decode-btn",onClick:()=>F(),children:(0,m.jsx)("span",{className:"decode-btn-text",children:"\u8bc6\u522b"})})]})})]}),(0,m.jsx)("div",{className:"bg"})]})},R=_}}]);